# yomikikase-planner

幼稚園の「絵本読み聞かせ」活動のための、LINEミニアプリ＋管理用Webアプリです。

- 保護者は LINE ミニアプリから **参加アンケートに回答** する
- 管理者は Web 画面から **アンケート結果を確認** し、**確定した日程・参加者を登録** する
- 人に紐づくデータ（参加履歴など）は年度単位で完結させつつ、
  **「どの学年でどの絵本を読んだか」の履歴だけ長期保存** できることを目指します

## 背景

現在は Google フォーム＋ LINE グループ＋ Excel のような運用で、

- 名前表記ゆれによる紐付けの大変さ
- 「誰が何回参加したのか」を追う手間
- 過去に読んだ絵本の記録が散逸してしまう

といった課題がある。

このリポジトリでは、次のようなポリシーで改善を目指します。

- ユーザー識別は **LINE の userId** で行い、「名前文字列マッチ地獄」から脱出する
- 年度ごとに活動を区切り、人に紐づくデータは長期保存しない
- 絵本の履歴は **ISBN / 書誌情報** ベースで残し、次の絵本選びに活かせるようにする

---

## 機能概要（MVP）

MVP では、機能をできるだけ絞り込んでスタートします。

### 管理者向け

- アンケート作成
  - 年度・タイトル・説明
  - 開催候補日（日時＋対象学年）の登録
- アンケート結果の確認
  - 学年・クラスでフィルタ表示
  - CSV エクスポート（別システムでの自動割り当てを想定）
- 確定日程・参加者の登録
  - 学年・クラスごとに見やすいビューで参加者を設定
  - 確定済み日程の一覧表示

### 参加者（保護者）向け

- LINE ミニアプリ（LIFF）からのアンケート回答
  - 初回のみ、名前・学年・クラスを登録
  - 以降は LINE アカウント（userId）で識別
  - 対象アンケートごとに、各候補日への参加可否を回答

### 絵本の記録（将来機能）

- 読み聞かせで使用した絵本の登録
  - ISBN をもとに書誌情報・表紙画像URLを取得
  - 「いつ」「どの年度・学年で」読んだかを記録
- 過去に読んだ絵本の一覧・検索
- 「この学年でまだ読んでいない本」の把握

MVP 段階では **絵本機能のデータモデルだけ定義** し、実装は後続マイルストーンで進める想定です。

---

## 想定技術スタック（案）

※あくまで現時点の候補。実装開始時に見直してもよい。

- フロントエンド
  - LINE ミニアプリ(LIFF)：TypeScript + React（または Next.js の一部として実装）
  - 管理画面：TypeScript + React / Next.js
- バックエンド API
  - Node.js + TypeScript
  - Web フレームワーク：Express / Fastify / NestJS のいずれか
- データベース
  - PostgreSQL もしくは MySQL系（RDB想定）
- インフラ
  - 任意のクラウド（例：Railway, Render, Fly.io, AWS, GCP など）
- 外部サービス
  - LINE Messaging API / LIFF
  - 書誌情報取得用 API（Google Books API / 国会図書館サーチなど）※候補

---

## ディレクトリ構成（案）

まだ実装前なので「たたき台」です。

```text
yomikikase-planner/
  README.md
  Milestone.md
  ArchitectureDesign.md

  src/
    backend/           # API サーバー側
      app/             # ユースケース・サービス
      domain/          # ドメインモデル
      infra/           # DB・外部API連携
      interfaces/      # HTTP ルーティング・DTO
    frontend/
      admin/           # 管理画面（Web）
      liff/            # LIFF アプリ（保護者向け）

  docs/
    # 設計ドキュメント等をここに追加していく予定

  .env.example         # 環境変数のサンプル
  package.json
  tsconfig.json
```

## 開発の進め方（ざっくり）

- まずはドメイン・データモデル・API の最小セットを固める
- 管理画面から、
    - アンケート作成
    - アンケート結果閲覧
    - 確定日程登録ができるところを最初の目標にする
- その後、LIFF 側からのアンケート回答を実装
- 絵本記録機能は、データモデルを活かして段階的に足していく

詳細は Milestone.md を参照。